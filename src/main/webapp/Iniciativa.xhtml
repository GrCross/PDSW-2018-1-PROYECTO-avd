<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Consultar Iniciativas</title>
        
        <link rel="stylesheet" type="text/css" href="resources/css/main.css"/>
    </h:head>
    <h:body>
        <div class="item">
                <img src="/resources/images/cabecera.jpg" class="imagen" />
         </div>
        
        <h1></h1>        
        <h:form id="iniciativaForm">
            
            <p:panel id="consultar_Tabla" header="Consultar Iniciativas" visible="true" class="ui-panel-titlebar">
                <h:panelGrid columns="2" cellpadding="5" > 
                    <h:panelGrid columns="2" cellpadding="5" >                    
                        <p:outputLabel value="Nombre Iniciativa: " />
                        <p:outputLabel  value ="#{iniciativasBean.iniciativa.nombre}"/>

                        <p:outputLabel value="Autor " />
                        <p:outputLabel  value ="#{iniciativasBean.iniciativa.autor.nombre}"/>

                        <p:outputLabel value="Correo " />
                        <p:outputLabel  value ="#{iniciativasBean.iniciativa.autor.correo}"/>

                        <p:outputLabel value="Contenido " />
                        <p:outputLabel  value ="#{iniciativasBean.iniciativa.descripcion}"/>                    

                        <p:outputLabel value="Estado " />
                        <p:outputLabel  value ="#{iniciativasBean.iniciativa.estado}"/>

                        <p:outputLabel value="Palabras Clave " />
                        <p:outputLabel  value ="#{iniciativasBean.iniciativa.palabrasClave}"/>
                    
                    </h:panelGrid>
                    
                    <p:panel id="basic" header="Agregar comentario" style="margin-bottom:20px">
                        <h:panelGrid columns="1" cellpadding="2"  class="ui-panelGrid-Datos1">

                            
                            <p:outputLabel  value="contenido" />
                            <p:inputTextarea id="contenido" rows="5" cols="30" counter="display" maxlength="300" counterTemplate="{0} characters remaining." autoResize="false" binding="#{contenido}" />
                            <h:outputText id="display" />
                            <p:commandButton id="comentar" update="iniciativaForm" value="Comentar" actionListener="#{iniciativasBean.agregarComentario(contenido.value,LoginBean.usuario,iniciativasBean.iniciativa.id)}"  icon="ui-icon-check">
                                <p:resetInput target="contenido" />
                               <p:ajax resetValues="true" />
                            </p:commandButton>
                            <p:messages id="messages" showDetail="true" closable="true">
                                <p:autoUpdate />
                            </p:messages>
                        </h:panelGrid>
                    </p:panel>
                </h:panelGrid>
                
                           
                
                
                 <p:dataScroller value="#{iniciativasBean.consultarComentarios()}" var="Comentarios" chunkSize="10" class="ui-datascroller ui-datascroller-item">
                     <link rel="stylesheet" type="text/css" href="resources/css/main.css"/>
                    <f:facet name="header">
                        Comentarios
                    </f:facet>

                    <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
                        <img src="/resources/images/2.jpg" class="logo" style="width: 100px"/> 

                        <p:outputPanel>
                            <h:panelGrid columns="2" cellpadding="5">
                                <h:outputText value="Autor:" />
                                <p:outputLabel value="#{Comentarios.usuario.nombre}"  class="logo"/>

                                <h:outputText value="Fecha:" />
                                <h:outputText value="#{Comentarios.fechaDePublicacion}" style="text-align:left ;padding-left: 25px"/>

                                <h:outputText value="Contenido:" />
                                <h:outputText value="#{Comentarios.contenido}" style="text-align:left;padding-left: 25px"/>
                            </h:panelGrid>
                        </p:outputPanel>
                    </h:panelGrid>
                </p:dataScroller>

                
                
            </p:panel>
        </h:form>   
    </h:body>
</html>